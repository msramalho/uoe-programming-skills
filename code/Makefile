##-----Makefile help-----

CC=gcc
COMPILE_RULE=$(CC) -g -c $<

.PHONY : help

##- all:          compiles, links and leaves only the executable main.out
all: main.o percolate.o utils.o pgm.o uni.o arralloc.o
	$(CC) -g $^ -lm -o main.out
	@# remove .o files after .out is ready
	@rm -f *.o

##- %.o:          pattern to compile all of the main code files ()
%.o : %.c %.h 
	$(COMPILE_RULE)

##- %.o:          pattern to compile all of the lib files
%.o : lib/%.c lib/%.h
	$(COMPILE_RULE)

.SILENT: clean realclean
##- clean:        removes all of the files generated by building the code
clean :
	rm -f *.o *.out

##- realclean:    invokes "clean" and also removes .dat and .pgm files (program outputs)
realclean: clean
	rm -f *.dat *.pgm

##- help:         displays helpful information
help : Makefile
	@sed -n 's/^##//p' $<